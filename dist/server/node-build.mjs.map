{"version":3,"file":"node-build.mjs","sources":["../../server/routes/demo.ts","../../server/routes/ideas.ts","../../server/index.ts","../../server/node-build.ts"],"sourcesContent":["import { RequestHandler } from \"express\";\nimport { DemoResponse } from \"@shared/api\";\n\nexport const handleDemo: RequestHandler = (req, res) => {\n  const response: DemoResponse = {\n    message: \"Hello from Express server\",\n  };\n  res.status(200).json(response);\n};\n","import { RequestHandler } from \"express\";\nimport {\n  Idea,\n  GetIdeasResponse,\n  CreateIdeaResponse,\n  CreateIdeaRequest,\n} from \"@shared/api\";\n\n// In-memory storage for ideas (in production, use a real database)\nconst ideasStore: Map<string, Idea> = new Map();\n\nexport const getIdeas: RequestHandler = (_req, res) => {\n  const ideas = Array.from(ideasStore.values()).sort(\n    (a, b) =>\n      new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n  );\n\n  const response: GetIdeasResponse = { ideas };\n  res.json(response);\n};\n\nexport const createIdea: RequestHandler = (req, res) => {\n  const { title, description } = req.body as CreateIdeaRequest;\n\n  if (!title || !description) {\n    res.status(400).json({ error: \"Title and description are required\" });\n    return;\n  }\n\n  const id = Date.now().toString();\n  const idea: Idea = {\n    id,\n    title,\n    description,\n    createdAt: new Date().toISOString(),\n  };\n\n  ideasStore.set(id, idea);\n\n  const response: CreateIdeaResponse = { idea };\n  res.status(201).json(response);\n};\n\nexport const deleteIdea: RequestHandler = (req, res) => {\n  const { id } = req.params;\n\n  if (!ideasStore.has(id)) {\n    res.status(404).json({ error: \"Idea not found\" });\n    return;\n  }\n\n  ideasStore.delete(id);\n  res.status(200).json({ success: true });\n};\n","import \"dotenv/config\";\nimport express from \"express\";\nimport cors from \"cors\";\nimport { handleDemo } from \"./routes/demo\";\nimport { getIdeas, createIdea, deleteIdea } from \"./routes/ideas\";\n\nexport function createServer() {\n  const app = express();\n\n  // Middleware\n  app.use(cors());\n  app.use(express.json());\n  app.use(express.urlencoded({ extended: true }));\n\n  // Example API routes\n  app.get(\"/api/ping\", (_req, res) => {\n    const ping = process.env.PING_MESSAGE ?? \"ping\";\n    res.json({ message: ping });\n  });\n\n  app.get(\"/api/demo\", handleDemo);\n\n  // Ideas API routes\n  app.get(\"/api/ideas\", getIdeas);\n  app.post(\"/api/ideas\", createIdea);\n  app.delete(\"/api/ideas/:id\", deleteIdea);\n\n  return app;\n}\n","import path from \"path\";\nimport { createServer } from \"./index\";\nimport * as express from \"express\";\n\nconst app = createServer();\nconst port = process.env.PORT || 3000;\n\n// In production, serve the built SPA files\nconst __dirname = import.meta.dirname;\nconst distPath = path.join(__dirname, \"../spa\");\n\n// Serve static files\napp.use(express.static(distPath));\n\n// Handle React Router - serve index.html for all non-API routes\napp.get(\"/*\", (req, res) => {\n  // Don't serve index.html for API routes\n  if (req.path.startsWith(\"/api/\") || req.path.startsWith(\"/health\")) {\n    return res.status(404).json({ error: \"API endpoint not found\" });\n  }\n\n  res.sendFile(path.join(distPath, \"index.html\"));\n});\n\napp.listen(port, () => {\n  console.log(`ðŸš€ Fusion Starter server running on port ${port}`);\n  console.log(`ðŸ“± Frontend: http://localhost:${port}`);\n  console.log(`ðŸ”§ API: http://localhost:${port}/api`);\n});\n\n// Graceful shutdown\nprocess.on(\"SIGTERM\", () => {\n  console.log(\"ðŸ›‘ Received SIGTERM, shutting down gracefully\");\n  process.exit(0);\n});\n\nprocess.on(\"SIGINT\", () => {\n  console.log(\"ðŸ›‘ Received SIGINT, shutting down gracefully\");\n  process.exit(0);\n});\n"],"names":["app","express"],"mappings":"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"}